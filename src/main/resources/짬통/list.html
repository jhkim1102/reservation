<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layouts/layout1}">

<th:block layout:fragment="css">
<link rel="stylesheet" type="text/css" href="css/list.css"/>
</th:block>


<div layout:fragment="content" id="bbsList">
	<div id="bbsList_header">
		<div id="leftHeader">
		<form action="/list" method="post" name="searchForm">
			<select name="searchKey" class="selectField">
				<option value="subject">여행지</option>
				<option value="name">작성자</option>
				<option value="content">내용</option>
			</select>
			
			<input type="text" name="searchValue" class="textField"/>
			<input type="button" value=" 검 색 " class="btn2" onclick="sendIt();"/>
		</form>				
		</div>
		<div id="rightHeader">
			<input type="button" value=" 처음으로 " class="btn3"
			 onclick="javascript:location.href='/';"/>			
		</div>		
	</div>
		
	
	<div id="bbsList_list">
		<table>		
		<thead id="title">
			<tr>
				<th class="num">번호</th>
				<th class="subject">여행지</th>
				<th class="name">이름</th>
				<th class="created">작성일</th>
			</tr>
		</thead>
		<tbody id="lists">
								<!--for(reservation reservation : lists)  -->			
			<tr th:if="${#lists.size(lists)} > 0 " th:each="reservation:${lists}">
				<td class="num" th:text="${reservation.num}"></td>
				<td class="subject">
					<a th:href="|@{${articleUrl}}&num=@{${reservation.num}}|" th:text="${reservation.subject}"></a>
				</td>
				<td class="name" th:text="${reservation.name}"></td>
				<td class="created" th:text="${reservation.created}"></td>
			</tr>
			
			<tr th:if="${#lists.size(dataCount)} > 0" th:each="dataCount:${dataCount}">
				<td colspan="5" id = "footer">
				<a href="list?pageNum=1">«</a></li>
				<a th:utext="${pageIndexList}"><span class="sr-only">(current)</span></a></li>
				<a href="">»</a></li>
	<!-- 				<a th:utext="${pageIndexList}"></a> -->
				</td>
			</tr>
			
			<tr th:if="${#lists.size(dataCount)} < 0 ">
				<td colspan="5">등록된 게시물이 없습니다.</td>
			</tr>
		</tbody>		
	</table>
	</div>

	
</div>
<th:block layout:fragment="script">
<script th:inline="javascript">
	var errorMessage1 = [[${param.errorMessage}]]; //get방식의 데이터를 가져올 수 있다.
	var errorMessage2 = [[${errorMessage}]]; //POST방식의 데이터를 가져올 수 있다.
	
	if(errorMessage1 !=null){
		alert(errorMessage1);
	}
	
	if(errorMessage2 !=null){
		alert(errorMessage2);
	}
	
	function sendIt(){
		var f = document.searchForm;
		var str = f.searchValue.value;
		str = str.trim();
		
		if(!str){
			alert("검색어를 입력하세요.");
			f.searchValue.focus();
			return;
		}
		
		f.submit();
	}
	
</script>
</th:block>
</html>